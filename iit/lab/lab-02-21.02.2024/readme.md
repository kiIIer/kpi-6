# Лабораторна робота № 2

## Тема

ВІРТУАЛІЗАЦІЯ. VAGRANT

## Виконання

### Встановлення Vagrant

Оскільки в мене MacOS, в мене є пакетний менеджер `brew` та встановити Vagrant можна за допомогою команди `brew install -cask vagrant`, після цієї команди brew встановить вагрант та після перевірки, бачимо що він встановлений

![Рисунок 1 - Встановлений Vagrant](image.png)

### Ініціалізація та простий запуск

Для хелоу ворлд варіанту запустимо голу убунту.

Оскільки в мене M1 чіп, я використаю образ `bento/ubuntu-22.04-arm64`, який буде правильно працювати. Та ще поставимо плагін для підтримки мого Parallels

![Рисунок 2 - Піднята убунту](image-1.png)

Перевіримо за допомогою статусу чи вона запущена.

![Рисунок 3 - Перевірка за статусом](image-2.png)

Переглянемо чи є віртуальна машина в Parallels.

![Рисунок 4 - Віртуальна машина в Parallels](image-3.png)

### Створення конфігурації та всяких приколів

Спочатку переналаштуємо порт ssh, нам потрібно змінити файл але тільки одну частину(бо інші налаштування нам потрібні такі самі). І це треба ще і як одна команда а не самому в редакторі лізди. Для цього існує sed, дуже страшна команад яка може регулярними виразами змінювати файли. Ось так `sed -i.bak 's/^#Port 22/Port 23/' "$SSHD_CONFIG"` можна змінити закоментований порт 22 на порт 23, далі перзапускаємо та порт офіційно налагоджено.

![Рисунок 5 - Налагоджений порт ssh](image-4.png)

А тепер щоб запустити свій сервіс треба туди файли передати, тому я зробив shared folder, частина якої тут а друга в віртуалці.

![Рисунок 6 - Спільна директорія](image-5.png)

Зробимо та перенесемо туди простий застосунок. На пітоні з фласком який буде писати wsup, бо це what's up. Також нам потрібно те що зможе запустити цей пітон файл, тому треба встановити пітон та піп, щоб поставити фласк, та запустити в бекграунді сервіс. Файл після цього буде виглядати наступним чином

```bash
...

sudo apt-get update

sudo apt-get install -y python3 python3-pip

pip3 install Flask

nohup python3 sync/server.py
```

### Тестування віртуальної машини

![Рисунок 7 - Використання ssh з портом 23 в віртуальній машині](image-6.png)

На цьому зображенні видно з'єднання з віртуальною машиною за допомогою ssh на порті 23, тобто наше налаштування через sed працює.

![Рисунок 8 - Запущений веб сервер](image-7.png)

На цьому зображені відповідь від нашого маленького пітон серверу, тобто pip, python, flask було поставлено та він приймає з'єднання.

## Висновок

На цій лабораторній роботі я познайомився з утилітою Vagrant, яка дозволяє налаштовувати віртуальні машини та автоматизувати їх створення для подальшого тестування софту на них.
